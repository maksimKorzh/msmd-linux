#!/bin/sh

# Suppress kernel messages
dmesg -n 1

# Display logo
clear
cat /etc/logo.txt
sleep 1

# Create directories
mkdir -p home/msmd
mkdir -p usr/local
mkdir -p tmp
mkdir -p mnt
mkdir -p dev
mkdir -p proc
mkdir -p sys

# Mount file systems
mount -t devtmpfs none /dev
mount -t proc none /proc
mount -t sysfs none /sys
mount -t tmpfs none /tmp

# Set permissions
chown -R root:root /bin /sbin /lib /lib64 /etc /usr /mnt
chown root:root /init /sbin/sudo
chmod 4755 /sbin/sudo
chown root:root /etc/sudoers
chmod 0440 /etc/sudoers
chown -R msmd:msmd /home /tmp
chmod -R a+ /home /tmp

# Start buxybox init as PID 1
exec /sbin/init
